module "idsync" {
  source = "github.com/silinternational/idp-in-a-box//terraform/070-id-sync"
  app_name = "${var.app_name}"
  app_env = "${var.app_env}"
  logentries_set_id = "${data.terraform_remote_state.cluster.logentries_set_id}"
  vpc_id = "${data.terraform_remote_state.cluster.vpc_id}"
  alb_https_listener_arn = "${data.terraform_remote_state.cluster.alb_https_listener_arn}"
  subdomain = "${var.sync_subdomain}"
  cloudflare_domain = "${var.cloudflare_domain}"
  docker_image = "${data.terraform_remote_state.ecr.ecr_repo_idsync}"
  id_broker_access_token = "${data.terraform_remote_state.broker.access_token_idsync}"
  id_broker_adapter = "${var.id_broker_adapter}"
  id_broker_base_url = "https://${data.terraform_remote_state.broker.hostname}"
  id_store_adapter = "${var.id_store_adapter}"
  id_store_api_key = "${var.id_store_api_key}"
  id_store_api_secret = "${var.id_store_api_secret}"
  id_store_base_url = "${var.id_store_base_url}"
  idp_name = "${var.idp_name}"
  ecs_cluster_id = "${data.terraform_remote_state.core.ecs_cluster_id}"
  ecsServiceRole_arn = "${data.terraform_remote_state.core.ecsServiceRole_arn}"
  alb_dns_name = "${data.terraform_remote_state.cluster.alb_dns_name}"
}